<!-- PUBLIC LAYOUT: For /apply/:jobId routes -->
<div *ngIf="isPublicRoute()"
  style="background-color: rgb(243, 243, 243); min-height: 100vh; display: flex; align-items: center; justify-content: center;">
  <div style="width: 100%; max-width: 1200px; padding: 20px;">
    <router-outlet></router-outlet>
  </div>
</div>

<!-- ADMIN LAYOUT: For all other authenticated routes -->
<div *ngIf="!isPublicRoute()" class="d-flex" style="background-color: rgb(243, 243, 243); min-height: 100vh;">
  <!-- Floating Sidebar -->
  <nav *ngIf="showSidebar" class="sidebar d-flex flex-column align-items-start p-3 shadow"
    style="width: 280px; min-width: 200px; margin: 32px; border-radius: 18px; height: calc(100vh - 64px);">
    <a class="navbar-brand d-flex align-items-center mb-4 text-decoration-none" href="/">
      <img src="/assets/logo.png" alt="Logo" width="36" height="36" class="me-2" />
      <span class="fs-4" style="color: #222;">InstaShortlist</span>
    </a>
    <!-- Navigation links only visible if logged in -->
    <ng-container *ngIf="authService.isLoggedIn()">
      <ul class="nav nav-pills flex-column w-100 mb-auto">
        <li class="nav-item w-100 mb-2">
          <a class="nav-link d-flex align-items-center gap-2" routerLink="/dashboard" routerLinkActive="active">
            <span class="sidebar-icon"><i class="fas fa-tachometer-alt"></i></span>
            <span class="sidebar-link-text">Dashboard</span>
          </a>
        </li>
        <li class="nav-item w-100 mb-2">
          <a class="nav-link d-flex align-items-center gap-2" routerLink="/inbox" routerLinkActive="active">
            <span class="sidebar-icon"><i class="fas fa-inbox"></i></span>
            <span class="sidebar-link-text">Inbox</span>
          </a>
        </li>
        <li class="nav-item w-100 mb-2">
          <a class="nav-link d-flex align-items-center gap-2" routerLink="/jobs" routerLinkActive="active">
            <span class="sidebar-icon"><i class="fa fa-briefcase"></i></span>
            <span class="sidebar-link-text">Jobs</span>
          </a>
        </li>
        <li class="nav-item w-100 mb-2">
          <a class="nav-link d-flex align-items-center gap-2" routerLink="/assessments" routerLinkActive="active">
            <span class="sidebar-icon"><i class="fas fa-clipboard-list"></i></span>
            <span class="sidebar-link-text">Assessments</span>
          </a>
        </li>
        <li class="nav-item w-100 mb-2">
          <a class="nav-link d-flex align-items-center gap-2" routerLink="/candidates" routerLinkActive="active">
            <span class="sidebar-icon"><i class="fa fa-user-friends"></i></span>
            <span class="sidebar-link-text">Candidates</span>
          </a>
        </li>
        <li class="nav-item w-100 mb-2">
          <a class="nav-link d-flex align-items-center gap-2" routerLink="/offers" routerLinkActive="active">
            <span class="sidebar-icon"><i class="fas fa-award"></i></span>
            <span class="sidebar-link-text">Offers</span>
          </a>
        </li>
      </ul>
    </ng-container>
    <div class="mt-auto w-100">
      <ng-container *ngIf="authService.isLoggedIn(); else notLoggedIn">
        <ul class="nav nav-pills flex-column w-100 mb-2">
          <li class="nav-item w-100 mb-2">
            <a class="nav-link d-flex align-items-center gap-4" (click)="logout()" style="cursor:pointer;">
              <i class="fas fa-sign-out-alt me-2"></i>
              Logout
            </a>
          </li>
        </ul>
      </ng-container>
      <ng-template #notLoggedIn>
        <ul class="nav nav-pills flex-column w-100 mb-2">
          <li class="nav-item w-100 mb-2">
            <a class="nav-link d-flex align-items-center gap-4" routerLink="/login" routerLinkActive="active">
              <i class="fas fa-sign-in-alt me-2"></i>
              Login
            </a>
          </li>
          <li class="nav-item w-100 mb-2">
            <a class="nav-link d-flex align-items-center gap-4" routerLink="/register" routerLinkActive="active">
              <i class="fas fa-user-plus me-2"></i>
              Register
            </a>
          </li>
        </ul>
      </ng-template>
    </div>
  </nav>
  <!-- Main content for admin -->
  <div class="flex-grow-1 main-content-wrapper" style="padding: 40px 40px 40px 40px;">
    <div class="main-content rounded-4">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>

